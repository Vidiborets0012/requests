{"version":3,"file":"03_practice.js","sources":["../src/js/03_practice.js"],"sourcesContent":["import axios from 'axios';\n\nimport '../css/axios.css';\n\n/**\n * https://thecatapi.com/\n *\n * 1) Створити сторінку яка при завантаженні робить запит на бекенд і оримує\n *  всі доступні breeds. https://api.thecatapi.com/v1/breeds\n *\n * 2) В інтерфейсі є форма пошуку з прив'язаним datalist з завантаженими breeds.\n *\n * 3) Користувач в формі вводить або обирає необхідний breed і при сабміті форми\n *  виконується GET запит за зображенням.\n *\n * 4) Після запиту під формою відображається картка з зображенням.\n *\n * 5) Під час запиту під формую відображається loader\n */\n\n/*\nlive_oBTaDry7pkRad84v3pwvr0m1B26neJzMO1PUyRDKjovZ6njmlA4VSMU5DaYY8Pi4\n*/\n\nconst form = document.querySelector('#search-form');\nconst breedInput = document.querySelector('#breed-input');\nconst breedsList = document.querySelector('#breeds-list');\nconst loader = document.querySelector('#loader');\nconst catCard = document.querySelector('#cat-card');\n\nform.addEventListener('submit', handleSubmit);\n\nfetchBreeds();\n\nfunction fetchBreeds() {\n  axios('https://api.thecatapi.com/v1/breeds')\n    .then(res => {\n      console.log(res.data);\n      breedsList.insertAdjacentHTML(\n        'beforeend',\n        createDatalistOptions(res.data)\n      );\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction createDatalistOptions(arr) {\n  return arr\n    .map(\n      ({ id, name }) => `\n  <option value=\"${name}\" data-id=\"${id}\"></option>`\n    )\n    .join('');\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const myBreed = breedInput.value;\n  // console.log('myBreed:', myBreed);\n  const selectedBreed = [...breedsList.options].find(\n    option => option.value.toLowerCase() === myBreed.toLowerCase().trim()\n  );\n\n  // console.log('selectedBreed:', selectedBreed);\n  if (!selectedBreed) {\n    alert('Оберіть існуючу породу!');\n    return;\n  }\n\n  const breedId = selectedBreed.dataset.id;\n  console.log('breedId:', breedId);\n  loader.classList.remove('hidden');\n  // catCard.innerHTML = '';\n\n  axios(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(res => {\n      console.log(res);\n      if (res.data.length > 0) {\n        const catUrl = res.data[0].url;\n\n        catCard.innerHTML = `\n          <div class=\"card\">\n            <img src=\"${catUrl}\" alt=\"${myBreed}\" class=\"card-img\"/>\n            <div class=\"card-body\">\n              <h3 class=\"card-title\">${myBreed}</h3>\n            </div>\n          </div>`;\n      } else {\n        catCard.innerHTML = `<p class=\"error-text\">Зображення не знайдено</p>`;\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loader.classList.add('hidden');\n    });\n}\n"],"names":["form","breedInput","breedsList","loader","catCard","handleSubmit","fetchBreeds","axios","res","createDatalistOptions","error","arr","id","name","event","myBreed","selectedBreed","option","breedId","catUrl"],"mappings":"uIAwBA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5CC,IAEA,SAASA,GAAc,CACrBC,EAAM,qCAAqC,EACxC,KAAKC,GAAO,CACX,QAAQ,IAAIA,EAAI,IAAI,EACpBN,EAAW,mBACT,YACAO,EAAsBD,EAAI,IAAI,CACtC,CACA,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAEA,SAASD,EAAsBE,EAAK,CAClC,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAI,IAAO;AAAA,mBACLA,CAAI,cAAcD,CAAE,aAClC,EACA,KAAK,EAAE,CACZ,CAEA,SAASP,EAAaS,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAUd,EAAW,MAErBe,EAAgB,CAAC,GAAGd,EAAW,OAAO,EAAE,KAC5Ce,GAAUA,EAAO,MAAM,YAAa,IAAKF,EAAQ,YAAa,EAAC,KAAM,CACzE,EAGE,GAAI,CAACC,EAAe,CAClB,MAAM,yBAAyB,EAC/B,MACD,CAED,MAAME,EAAUF,EAAc,QAAQ,GACtC,QAAQ,IAAI,WAAYE,CAAO,EAC/Bf,EAAO,UAAU,OAAO,QAAQ,EAGhCI,EAAM,wDAAwDW,CAAO,EAAE,EACpE,KAAKV,GAAO,CAEX,GADA,QAAQ,IAAIA,CAAG,EACXA,EAAI,KAAK,OAAS,EAAG,CACvB,MAAMW,EAASX,EAAI,KAAK,CAAC,EAAE,IAE3BJ,EAAQ,UAAY;AAAA;AAAA,wBAEJe,CAAM,UAAUJ,CAAO;AAAA;AAAA,uCAERA,CAAO;AAAA;AAAA,iBAG9C,MACQX,EAAQ,UAAY,kDAE5B,CAAK,EACA,MAAMM,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbP,EAAO,UAAU,IAAI,QAAQ,CACnC,CAAK,CACL"}